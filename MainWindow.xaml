<Window x:Class="BiochemSimulator.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Biochemistry Simulator" Height="800" Width="1200"
        WindowState="Maximized"
        Background="#1C2833">

    <Window.Resources>
        <!-- Chemical Button Style -->
        <Style x:Key="ChemicalButton" TargetType="Button">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Background" Value="#34495E"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="5"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3498DB"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <!-- Main Content Grid -->
        <Grid x:Name="SimulatorView" Visibility="Visible">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Tutorial Message -->
            <Border Grid.Row="0" Background="#2C3E50" Padding="15" Margin="10">
                <TextBlock x:Name="TutorialText"
                          Text="Welcome to the Biochemistry Simulator!"
                          Foreground="White"
                          FontSize="16"
                          TextWrapping="Wrap"
                          FontWeight="SemiBold"/>
            </Border>

            <!-- Main Workspace -->
            <Grid Grid.Row="1" Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="250"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="300"/>
                </Grid.ColumnDefinitions>

                <!-- Chemical Inventory -->
                <Border Grid.Column="0" Background="#2C3E50" CornerRadius="10" Padding="10">
                    <StackPanel>
                        <TextBlock Text="Chemical Inventory"
                                  Foreground="White"
                                  FontSize="18"
                                  FontWeight="Bold"
                                  Margin="0,0,0,10"/>
                        <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="600">
                            <ItemsControl x:Name="ChemicalInventory">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Button Style="{StaticResource ChemicalButton}"
                                                Click="ChemicalButton_Click"
                                                Tag="{Binding Name}">
                                            <StackPanel>
                                                <TextBlock Text="{Binding Name}" FontWeight="Bold"/>
                                                <TextBlock Text="{Binding Formula}" FontSize="10" Opacity="0.8"/>
                                            </StackPanel>
                                        </Button>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </StackPanel>
                </Border>

                <!-- Experiment Area -->
                <Grid Grid.Column="1" Margin="10,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="200"/>
                    </Grid.RowDefinitions>

                    <!-- Beaker -->
                    <Border Grid.Row="0" Background="#34495E" CornerRadius="10" Padding="20">
                        <Grid>
                            <Ellipse x:Name="Beaker"
                                    Width="300"
                                    Height="400"
                                    VerticalAlignment="Center"
                                    HorizontalAlignment="Center">
                                <Ellipse.Fill>
                                    <RadialGradientBrush>
                                        <GradientStop Color="#ECF0F1" Offset="0"/>
                                        <GradientStop Color="#BDC3C7" Offset="1"/>
                                    </RadialGradientBrush>
                                </Ellipse.Fill>
                                <Ellipse.Effect>
                                    <DropShadowEffect BlurRadius="20" ShadowDepth="5" Opacity="0.5"/>
                                </Ellipse.Effect>
                            </Ellipse>

                            <Canvas x:Name="BeakerCanvas"
                                   Width="280"
                                   Height="380"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"
                                   ClipToBounds="True"/>

                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <TextBlock Text="Reaction Beaker"
                                          Foreground="White"
                                          FontSize="20"
                                          FontWeight="Bold"
                                          HorizontalAlignment="Center"/>
                                <TextBlock x:Name="BeakerContentText"
                                          Text="Empty"
                                          Foreground="White"
                                          FontSize="14"
                                          Margin="0,10,0,0"
                                          TextWrapping="Wrap"
                                          TextAlignment="Center"
                                          MaxWidth="250"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Microscope View -->
                    <Border x:Name="MicroscopeView"
                           Grid.Row="1"
                           Background="#2C3E50"
                           CornerRadius="10"
                           Padding="10"
                           Visibility="Collapsed">
                        <Grid>
                            <Ellipse Width="150" Height="150"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Fill="Black"
                                    Opacity="0.8"/>
                            <Canvas x:Name="MicroscopeCanvas"
                                   Width="140"
                                   Height="140"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   ClipToBounds="True"/>
                            <TextBlock Text="ðŸ”¬ Microscope"
                                      Foreground="White"
                                      FontSize="16"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Top"
                                      Margin="0,5,0,0"/>
                        </Grid>
                    </Border>

                    <!-- Trash Can -->
                    <Border x:Name="TrashCan"
                           Grid.Row="1"
                           Background="#E74C3C"
                           CornerRadius="10"
                           Padding="20"
                           Margin="10"
                           Visibility="Collapsed"
                           MouseEnter="TrashCan_MouseEnter"
                           MouseLeave="TrashCan_MouseLeave"
                           MouseDown="TrashCan_Click">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="ðŸ—‘ï¸" FontSize="48" HorizontalAlignment="Center"/>
                            <TextBlock Text="Dispose Organisms"
                                      Foreground="White"
                                      FontSize="16"
                                      FontWeight="Bold"
                                      HorizontalAlignment="Center"
                                      Margin="0,10,0,0"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Info Panel -->
                <Border Grid.Column="2" Background="#2C3E50" CornerRadius="10" Padding="10">
                    <StackPanel>
                        <TextBlock Text="Experiment Info"
                                  Foreground="White"
                                  FontSize="18"
                                  FontWeight="Bold"
                                  Margin="0,0,0,10"/>

                        <TextBlock Text="Current Phase:"
                                  Foreground="#BDC3C7"
                                  FontSize="12"
                                  Margin="0,5,0,2"/>
                        <TextBlock x:Name="PhaseText"
                                  Text="Amino Acids"
                                  Foreground="White"
                                  FontSize="14"
                                  FontWeight="SemiBold"
                                  Margin="0,0,0,10"/>

                        <TextBlock Text="Beaker Contents:"
                                  Foreground="#BDC3C7"
                                  FontSize="12"
                                  Margin="0,5,0,2"/>
                        <ScrollViewer MaxHeight="200" VerticalScrollBarVisibility="Auto">
                            <ItemsControl x:Name="BeakerContents" Margin="0,0,0,10">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="#34495E"
                                               CornerRadius="3"
                                               Padding="8,4"
                                               Margin="0,2">
                                            <TextBlock Foreground="White" FontSize="12">
                                                <Run Text="{Binding Name}"/>
                                                <Run Text=" (" Foreground="#95A5A6"/>
                                                <Run Text="{Binding Formula}" Foreground="#95A5A6"/>
                                                <Run Text=")" Foreground="#95A5A6"/>
                                            </TextBlock>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>

                        <Button Content="Clear Beaker"
                               Style="{StaticResource ModernButton}"
                               Background="#E74C3C"
                               Click="ClearBeaker_Click"
                               Margin="0,10,0,0"/>

                        <!-- Organism Stats (hidden initially) -->
                        <Border x:Name="OrganismStats"
                               Background="#34495E"
                               CornerRadius="5"
                               Padding="10"
                               Margin="0,20,0,0"
                               Visibility="Collapsed">
                            <StackPanel>
                                <TextBlock Text="Outbreak Statistics"
                                          Foreground="White"
                                          FontSize="16"
                                          FontWeight="Bold"
                                          Margin="0,0,0,10"/>
                                <StackPanel Orientation="Horizontal" Margin="0,5">
                                    <TextBlock Text="Alive: " Foreground="#BDC3C7"/>
                                    <TextBlock x:Name="AliveCountText" Text="0" Foreground="#27AE60" FontWeight="Bold"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,5">
                                    <TextBlock Text="Generation: " Foreground="#BDC3C7"/>
                                    <TextBlock x:Name="GenerationText" Text="0" Foreground="#F39C12" FontWeight="Bold"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,5">
                                    <TextBlock Text="Total Created: " Foreground="#BDC3C7"/>
                                    <TextBlock x:Name="TotalCreatedText" Text="0" Foreground="#3498DB" FontWeight="Bold"/>
                                </StackPanel>

                                <TextBlock Text="Resistances:"
                                          Foreground="White"
                                          FontSize="14"
                                          FontWeight="Bold"
                                          Margin="0,15,0,5"/>
                                <ScrollViewer MaxHeight="150" VerticalScrollBarVisibility="Auto">
                                    <ItemsControl x:Name="ResistanceList"/>
                                </ScrollViewer>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Bottom Controls -->
            <Border Grid.Row="2" Background="#2C3E50" Padding="15" Margin="10">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Content="Start Game"
                           x:Name="StartButton"
                           Style="{StaticResource ModernButton}"
                           Background="#27AE60"
                           Click="StartGame_Click"
                           Width="150"/>
                    <TextBlock x:Name="StatusText"
                              Text="Ready to begin"
                              Foreground="White"
                              FontSize="14"
                              VerticalAlignment="Center"
                              Margin="20,0,0,0"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Desktop Overlay (for virus phase) -->
        <Canvas x:Name="DesktopOverlay"
               Visibility="Collapsed"
               Background="Transparent"
               MouseDown="DesktopOverlay_MouseDown">
            <!-- Organisms will be rendered here -->
        </Canvas>

        <!-- Desktop UI (for virus phase) -->
        <Grid x:Name="DesktopUI" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Chemical Selection Panel -->
            <Border Grid.Row="0"
                   Background="#2C3E50"
                   Padding="10"
                   Opacity="0.95"
                   HorizontalAlignment="Right"
                   VerticalAlignment="Top"
                   Margin="10"
                   CornerRadius="8">
                <StackPanel>
                    <TextBlock Text="Chemical Weapons"
                              Foreground="White"
                              FontSize="16"
                              FontWeight="Bold"
                              Margin="0,0,0,10"/>
                    <ItemsControl x:Name="WeaponInventory">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Button Style="{StaticResource ChemicalButton}"
                                        Click="WeaponButton_Click"
                                        Tag="{Binding Name}"
                                        Width="200">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸ’‰" FontSize="16" Margin="0,0,5,0"/>
                                        <StackPanel>
                                            <TextBlock Text="{Binding Name}" FontWeight="Bold"/>
                                            <TextBlock Text="{Binding Formula}" FontSize="10" Opacity="0.7"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Button>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                    <TextBlock x:Name="SelectedWeaponText"
                              Text="No weapon selected"
                              Foreground="#F39C12"
                              FontSize="12"
                              Margin="0,10,0,0"
                              TextWrapping="Wrap"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Alarm Overlay -->
        <Border x:Name="AlarmOverlay"
               Visibility="Collapsed"
               Background="#E74C3C"
               Opacity="0">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="âš ï¸ BIOHAZARD ALERT âš ï¸"
                          Foreground="White"
                          FontSize="72"
                          FontWeight="Bold"
                          HorizontalAlignment="Center"/>
                <TextBlock Text="ORGANISMS HAVE ESCAPED!"
                          Foreground="White"
                          FontSize="36"
                          FontWeight="Bold"
                          HorizontalAlignment="Center"
                          Margin="0,20,0,0"/>
                <TextBlock Text="Initiating containment protocol..."
                          Foreground="White"
                          FontSize="24"
                          HorizontalAlignment="Center"
                          Margin="0,20,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
